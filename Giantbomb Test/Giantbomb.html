<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>GIANTBOMB VIDEO</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">
    <link rel="shortcut icon" href="#">
<style>
  form {
      text-align:center;
  }

  div.card {
      margin-left: auto;
      margin-right: auto;
  }

  div.gameImage {
    margin-left: auto;
    margin-right: auto;
  }
</style>
</head>

<body>
<!-- Search box -->
  <form id="gameSearch">
    <input id="gameSearch" name="gameSearch" type="text">
    <button id = "gameButtonSearch">Get Games</button>
  </form>
<!-- This is just a div for games to populate for related games from cheapshark api -->
  <div id="gameData">
    <ul id="gameList">
    </ul>
  </div>
<!-- This is the card code I grabbed from Bootstrap -->
<div class="card" style="width: 25rem;">
  <div id = "gameImage"></div>
  <div id="card-body">
    <h5 id="gameName"></h5>
    <p id="gameDescription"></p>
  </div>
  <ul id="list-group list-group-flush">
    <li id="gameSite"></li>
    <li id="gameMeta"></li>
  </ul>
  <div id="card-body">
    <a href="#" id="card-link1"></a>
    <a href="#" id="card-link2"></a>
  </div>
</div>

<div id = "vidlink"></div>>

 <script>
  const form = document.getElementById("gameSearch");
  const gameData = document.getElementById("gameData");
   
//Giantbomb API
  const giantBombAPI = "4ccf8f3bad38d69d7a94f106fe749bdff1d91ef5"
  form.addEventListener('submit', (event) => {
  event.preventDefault();
  const gameSearch = event.target.gameSearch.value;
  const date = new Date();
  let tmrwYear = date.getYear().toString().substr(-2);
  let tmrwMonth = String(date.getMonth() + 1).padStart(2, "0");
  let tmrwDay = date.getDate() + 1;
  let tmrwDate = `${tmrwYear}${tmrwMonth}${tmrwDay}`
  console.log(gameSearch);
  fetch(`https://cors-proxy.fringe.zone/https://www.giantbomb.com/api/videos/?format=json&filter=name:${gameSearch}&api_key=${giantBombAPI}`)
    .then(res => res.json())
    .then(data => {
      console.log(data);
      data.results.map((datum) => {
         let gameVideo = document.getElementById("vidlink");
         gameVideo.innerHTML = `<a href = "${datum.low_url}">Click here to visit the video</a>`
         
         
      //   gameListItem.innerHTML = `
      //     ${datum.name}
      //     <img src="${datum.image.original}"
      //       onclick="location.href='./GameSearch.html?gameSearch=${datum.name}';" width = "200" height = "150">
      //       TEST
      //       <div id="dataresult">${datum.release_date}</div>
      //   `
      })
    });
  });

  </script>

</body>

</html>